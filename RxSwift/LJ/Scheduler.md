# Schedulers
---

## ğŸŸ¡Â ê°œìš”

ì˜µì €ë²„ë¸”, ì—°ì‚°ì ì²´ì¸ì—ì„œ ë©€í‹°ìŠ¤ë ˆë”©ì„ ì ìš©í•  ë•Œ â†’ ìŠ¤ì¼€ì¤„ëŸ¬ ì‚¬ìš©í•˜ì—¬ ì—°ì‚°ì/ì˜µì €ë²„ë¸” ì‹¤í–‰

- ë©€í‹°ìŠ¤ë ˆë”©ì´ í•„ìš”í•œ ê²½ìš°
    - ë„¤íŠ¸ì›Œí¬ ìš”ì²­         : ì•±ì˜ ë©”ì¸ìŠ¤ë ˆë“œ ì°¨ë‹¨ ì—†ì´ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì²˜ë¦¬í•´ì•¼ í•¨
    - ë°ì´í„° ì²˜ë¦¬, ê°€ê³µ    : DBì—ì„œ ë°ì´í„° ê°€ì ¸ì™€ ê°€ê³µ, UIìŠ¤ë ˆë“œì°¨ë‹¨ ì—†ì´ ë°ì´í„° ì²˜ë¦¬í•  ë•Œ
    - ë³‘ë ¬ì‘ì—…                 : ì´ë¯¸ì§€ ë™ì‹œ ë‹¤ìš´
    - ë¹„ë™ê¸° UI ì—…ë°ì´íŠ¸  : ë‹¤ë¥¸ ë¹„ë™ê¸°ì‘ì—… ëŒ€ê¸°í•  í•„ìš” ì—†ì´ UI ì—…ë°ì´íŠ¸ í•´ì•¼í•  ë•Œ
    - "ìŠ¤ë ˆë“œ" : ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë‹¨ìœ„
    - "ìŠ¤ì¼€ì¤„ëŸ¬" : ì‹¤í–‰ ê°€ëŠ¥í•œ ì‘ì—…ì„ ê´€ë¦¬, ì–´ë–¤ ìŠ¤ë ˆë“œì—ì„œ ì–´ëŠ ì‘ì—… ì‹¤í–‰í• ì§€ ê²°ì •í•˜ëŠ” ì—­í• , ì‘ì—…ë“¤ì„ ì˜ˆì•½, ì¡°ì ˆí•˜ì—¬ ë™ì‹œì„±ê³¼ ë³‘ë ¬ì„±ì„ ì œì–´
        
1. **Observable ë° ì¼ë¶€ ì—°ì‚°ìì˜ ìŠ¤ì¼€ì¤„ë§**
    
    ì¼ë¶€ ì—°ì‚°ìëŠ” ì‚¬ìš©í•  ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ”ë‹¤.(ì•„ë˜ë‘ê°œ, delay, timeout ë“±)
    
    íŒŒë¼ë¯¸í„°ë¡œ ë°›ì€ ìŠ¤ì¼€ì¤„ëŸ¬ ë‚´ì—ì„œ ì—°ì‚°ì„ ìˆ˜í–‰
    
    ê¸°ë³¸ì ìœ¼ë¡œ Observableê³¼ ì—°ì‚°ì ì²´ì¸ì€ ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ í†µí•´ ì‘ë™
    
2. **ì—°ì‚°ì SubscribeOn** 
    
    ì „ë‹¬ì¸ì : ì˜µì €ë²„ë¸”ì´ êµ¬ë…ë  ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì§€ì •
    
    ì—°ì‚°ì ì²´ì¸ì—ì„œ ì–´ë–¤ ìœ„ì¹˜ì—ì„œ í˜¸ì¶œí•˜ë”ë¼ë„ ë™ì‘
    
    ì˜µì €ë²„ë¸” ìƒì„± ì‹œì ê³¼ ê´€ë ¨
    
    ì˜µì €ë²„ë¸” ìƒì„±ì„ íŠ¹ì • ìŠ¤ì¼€ì¤„ëŸ¬ì—ì„œ ìƒì„±í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©
    
3. **ì—°ì‚°ì ObserveOn** 
    
    ì „ë‹¬ì¸ì : ì˜µì €ë²„ë¸”ì˜ ê²°ê³¼ë¥¼ ì²˜ë¦¬í• , ì˜µì €ë²„ì— ì•Œë¦¼ì„ ë³´ë‚¼ ë•Œ ì‚¬ìš©í• , ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì§€ì •
    
    ì—°ì‚°ì ì²´ì¸ì—ì„œ í˜¸ì¶œëœ ìœ„ì¹˜ì— ë”°ë¼ ê·¸ í›„ì— í˜¸ì¶œë˜ëŠ” ì—°ì‚°ìì— ì˜í–¥ì„ ì¤Œ(ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ë°”ë€Œë¯€ë¡œ)
    
    ì˜µì €ë²„ë¸”ì˜ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ì‹œì ê³¼ ê´€ë ¨
    
    operator(map, filter, etc)ì™€ subscribe ì‘ì—…ì„ íŠ¹ì • ìŠ¤ì¼€ì¤„ëŸ¬ì—ì„œ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©
    
    ```swift
    sequence1
      .observeOn(backgroundScheduler)     //í˜„ì¬ìŠ¤ì¼€ì¤„ëŸ¬->ğŸŸ bg ì§€ì •
      .map { n in                         //ğŸŸ 
          print("This is performed on the background scheduler")
      }
      .observeOn(MainScheduler.instance)  //ğŸŸ bg->ğŸ©·main ì§€ì •
      .map { n in                         //ğŸ©·
          print("This is performed on the main scheduler")
      }
    ```
    
- ì „ë‹¬ì¸ìì—ëŠ” **SubscribeOn, ObserveOn** ëª¨ë‘ ****ìŠ¤ì¼€ì¤„ëŸ¬íƒ€ì…ì´ ë“¤ì–´ê°
    - ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” **`SchedulerType`** í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ëŠ” íƒ€ì…ìœ¼ë¡œ ë‚˜íƒ€ëƒ„
        - ex. **`MainScheduler`**, **`ConcurrentDispatchQueueScheduler`**, **`SerialDispatchQueueScheduler`**
    - ë§Œì•½ íŠ¹ì • ìŠ¤ë ˆë“œë¡œ ì§€ì •í•œë‹¤ë©´, ìŠ¤ë ˆë“œë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ë¡œ ê¸°ì…

---

## ğŸŸ¡Â ì°¸ê³  ì´ë¯¸ì§€
<table>
  <tr>
    <td><img width=370 alt="ì´ë¯¸ì§€" src="https://github.com/lj-7-77/practice/assets/97071996/f3ea0875-d176-4e1f-96d4-0929424e5baf"  /></td>
    <td><img width=430 alt="ì´ë¯¸ì§€2" src="https://github.com/lj-7-77/practice/assets/97071996/df15cb56-c33c-4ea9-8b29-f7f9e35eb4ef"  /></td>
  <tr>
</table>

> ìƒ‰ìƒğŸŸ ğŸ”µğŸ©· : ìŠ¤ì¼€ì¤„ëŸ¬<br>
ë°•ìŠ¤ í…Œë‘ë¦¬ ìƒ‰ : ë©”ì„œë“œê°€ í˜¸ì¶œì´ ì´ë¤„ì§€ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬
> <br>ì „ë‹¬ì¸ì ì‚¼ê°í˜• ìƒ‰: í•´ë‹¹ ìŠ¤ë ˆë“œë¡œ ì „í™˜, ì‹¤ì œ ì‘ì—…ì´ ì‹¤í–‰

- ì˜ˆì‹œ ì½”ë“œ
  
```swift
import RxSwift

let disposeBag = DisposeBag()

// ğŸŸ  ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ì¼€ì¤„ëŸ¬
let backgroundScheduler = ConcurrentDispatchQueueScheduler(qos: .background)
let othercheduler = ConcurrentDispatchQueueScheduler(qos: .custom) //ğŸ”µ

let mainScheduler = MainScheduler.instance //ğŸ©· ë©”ì¸ ìŠ¤ì¼€ì¤„ëŸ¬

Observable.just(5)                      //ğŸ”µ ì˜µì €ë²„ë¸” ì„ ì–¸
    .observeOn(backgroundScheduler)     //ğŸ”µ->ğŸŸ  ì´ë²¤íŠ¸ì²˜ë¦¬ìŠ¤ì¼€ì¤„ëŸ¬ ì „í™˜
    .map { value in                     //ğŸŸ  ë°ì´í„° ë³€í™˜
        print("Mapping on Thread: \(Thread.current)")
        return value * 10 // ê°’ ë³€í™˜
    }
    .subscribeOn(othercheduler)    //í˜¸ì¶œğŸŸ ->ì‹¤ì œì‘ì—…ğŸ”µ ì´ˆê¸°êµ¬ë… ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ otherë¡œ ì§€ì •
    .observeOn(mainScheduler)            //ğŸ”µ->ğŸ©· ì´ë²¤íŠ¸ì²˜ë¦¬ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì „í™˜
    .subscribe(onNext: { transformedValue in //ğŸ©·
        print("Value: \(transformedValue), Thread: \(Thread.current)")
    })
    .disposed(by: disposeBag)
```
---

## ğŸŸ¡Â íŠ¹ì§•
- mapê³¼ subscribeOnì˜ í˜¸ì¶œìˆœì„œëŠ” ìƒí™©ì— ë”°ë¼ ë°”ë€” ìˆ˜ë„ ìˆë‹¤.
- subscribeOn í˜¸ì¶œì€ ğŸŸ ìŠ¤ì¼€ì¤„ëŸ¬,Â ì‘ì—…ìˆ˜í–‰ì€ ğŸ”µìŠ¤ì¼€ì¤„ëŸ¬ì—ì„œ ì§„í–‰ë˜ëŠ” ì´ìœ 
    - subscribeOnì€ ìŠ¤ì¼€ì¤„ëŸ¬ ì§€ì •ì„ í•˜ê³ , ì§€ì •ì„ í•˜ëŠ” í–‰ìœ„ê°€ ì´ë£¨ì–´ì§€ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì–´ë””ë“ ì§€ ì§€ì •ë°›ì€ íŠ¹ì • ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤.
    - ì‘ì—… ìˆ˜í–‰ì€ ì§€ì •ë°›ì€ ìŠ¤ì¼€ì¤„ëŸ¬ì—ì„œ ì§„í–‰ë˜ê¸° ë•Œë¬¸
    
    > ì‘ì—… ìˆ˜í–‰ì„ ë‹¤ë¥¸ ìŠ¤ì¼€ì¤„ëŸ¬ì—ì„œ í•˜ê³  ì‹¶ë‹¤ë©´Â *`observeOn(scheduler)`*Â ë¥¼ ì‚¬ìš©í•´ë¼.<br>
    sequence ìƒì„±ê³¼ dispose í˜¸ì¶œì„ íŠ¹ì • ìŠ¤ì¼€ì¤„ëŸ¬ì—ì„œ í•˜ê³  ì‹¶ë‹¤ë©´Â *`subscribeOn(scheduler)`*Â ë¥¼ ì‚¬ìš©í•˜ë¼([ê³µì‹ë¬¸ì„œ](https://github.com/ReactiveX/RxSwift/blob/main/Documentation/Schedulers.md))
    
    
    - subscribe í˜¸ì¶œ ì „ : ì˜µì €ë²„ë¸”ì€ ì„ ì–¸, ìƒì„±ë§Œ ëœ ìƒíƒœ, ì–´ë–¤ ì´ë²¤íŠ¸ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.
    - subscribe í˜¸ì¶œ í›„ : sequence ìƒì„±
        
        ```swift
        import RxSwift
        
        let numberObservable: Observable<Int> //ì„ ì–¸
        
        numberObservable = Observable.create { observer in  //ìƒì„±
            observer.onNext(1)
            observer.onNext(2)
            observer.onNext(3)
            observer.onCompleted()
            return Disposables.create()
        }
        //ì´í›„ subscribe í˜¸ì¶œí•˜ë©´ ì‹œí€€ìŠ¤ ìƒì„±ë¨
        ```
        
- âŒÂ subscribeOnì´ ì§ì ‘ subscribeì— ì˜í–¥ì„ ì£¼ëŠ”ê²ƒì´ ì•„ë‹˜
    - subscribeOn â†’ createí´ë¡œì €ì— ì˜í–¥ì„ ë¯¸ì¹œë‹¤.
        - createí´ë¡œì €ì—ì„œëŠ” ì˜µì €ë²„ë¸”ì„ ìƒì„±í•˜ëŠ” ê³¼ì • ì´ë£¨ì–´ì§„ë‹¤.
        - subscribeOnì´ ì§€ì •í•œ ìŠ¤ì¼€ì¤„ëŸ¬ì—ì„œ createí´ë¡œì € ë‚´ë¶€ ì‘ì—…ì´ ì‹¤í–‰ëœë‹¤.
    - observeOn â†’ subscribe()ì— ì˜í–¥ì„ ë¯¸ì¹œë‹¤.
        - subscribeëŠ” êµ¬ë… ê³¼ì •(ì‹¤ì œ ì˜µì €ë²„ë¸”ì˜ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ , ì²˜ë¦¬)ì„ ë§¡ì€ ë©”ì„œë“œì´ë‹¤.
        - observeOnì´ ì§€ì •í•œ ìŠ¤ì¼€ì¤„ëŸ¬ì—ì„œ subscribeì˜ ì‘ì—…ì´ ì‹¤í–‰ëœë‹¤.
        
- ë§ˆì§€ë§‰ì— observeOn í•œë²ˆë” í˜¸ì¶œí•˜ì—¬ ë‹¤ë¥¸ ìŠ¤ì¼€ì¤„ëŸ¬ë¡œ ì „í™˜í•˜ëŠ” ì´ìœ 
    - ìŠ¤ì¼€ì¤„ëŸ¬ ì „í™˜ì„ í†µí•´ ì‘ì—…ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œ
    - ìŠ¤ì¼€ì¤„ëŸ¬ ì „í™˜ì˜ ì¥ì 
        - ë³‘ë ¬ ì²˜ë¦¬ ë° ì„±ëŠ¥ í–¥ìƒ
        - ë©”ì¸ìŠ¤ì¼€ì¤„ëŸ¬ì—ì„œ ì´ë¤„ì ¸ì•¼í•˜ëŠ” ì‘ì—… - UI ì—…ë°ì´íŠ¸
        - ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì²˜ë¦¬ë¥¼ ìš”í•˜ëŠ” ì‘ì—… - ë„¤íŠ¸ì›Œí¬ ìš”ì²­, íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë“±
        - ë°ë“œë½ ë°©ì§€
          
- ê¸°ë³¸ì ìœ¼ë¡œëŠ” MainSchedulerì—ì„œ ì‹¤í–‰ë˜ë©°, ì½”ë“œ ìœ„ì¹˜ì— ë”°ë¼ ìƒìœ„ ìŠ¤ì¼€ì¤„ëŸ¬ì˜ ì˜í–¥ì„ ë°›ëŠ”ë‹¤.

---

ì°¸ê³ 

https://reactivex.io/documentation/ko/scheduler.html

[https://sweepty.medium.com/rxswift-scheduler-ì œëŒ€ë¡œ-ì•Œì•„ë³´ê¸°-f2e26aeb829d](https://sweepty.medium.com/rxswift-scheduler-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0-f2e26aeb829d)

http://rx-marin.com/post/observeon-vs-subscribeon/
